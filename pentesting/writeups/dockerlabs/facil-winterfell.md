# \[Fácil] Winterfell

Escaneamos puertos con nmap, nos encontramos con los puertos 22, 80, 139 y 445 abiertos, tipicamente el 22 para un servicio ssh, el 80 aloja una web con protocolo http y el 139 y 445 para servicio smb

```
nmap --min-rate 3000 172.17.0.2 -n -v -Pn -p- -sCV -o scan
```

<div align="left">

<figure><img src="../../../.gitbook/assets/image (87).png" alt="" width="563"><figcaption></figcaption></figure>

</div>

Ahora inspeccionamos la web y de paso hacer un escaneo de directorios y ficheros en el servidor web, nos encontramos con un directorio llamado dragon en donde encontramos un fichero con texto&#x20;

```
gobuster dir -u http://172.17.0.2 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -x php,html,sh,py -o winterfall.txt
```

<div align="left">

<figure><img src="../../../.gitbook/assets/image (88).png" alt="" width="563"><figcaption></figcaption></figure>

</div>

<div align="left">

<figure><img src="../../../.gitbook/assets/image (90).png" alt="" width="542"><figcaption></figcaption></figure>

</div>

<div align="left">

<figure><img src="../../../.gitbook/assets/image (89).png" alt="" width="563"><figcaption></figcaption></figure>

</div>

Intuyo que uno de estos puede ser un usuario de login para ssh, vamos a intentar a realizar una fuerza bruta con hydra a ver si tenemos suerte

```
hydra -L users.txt -P /usr/share/wordlists/rockyou.txt ssh://172.17.0.2 -t 16
```

&#x20;No encontramos nada por lo que vamos a probar si es una contraseña/usuario de smb, para ello realizamos fuerza bruta con crackmapexec y encontramos la contraseña

```
crackmapexec smb 172.17.0.2 -u /usr/share/wordlists/rockyou.txt -p passwd.txt
```

<div align="left">

<figure><img src="../../../.gitbook/assets/image (91).png" alt="" width="563"><figcaption></figcaption></figure>

</div>

Ahora debemos de comprobar con el usuario jon de que tenemos permisos a los directorios con la herramienta de smbmap y vemos que tenemos permisos en alguna carpetas.

<div align="left">

<figure><img src="../../../.gitbook/assets/image (93).png" alt="" width="563"><figcaption></figcaption></figure>

</div>

Accedemos al directorio shared con smbclient y nos descargamos el unico fichero que hay

<div align="left">

<figure><img src="../../../.gitbook/assets/image (94).png" alt="" width="563"><figcaption></figcaption></figure>

</div>

Dentro del archivo nos dan una contraseña encriptada con el algoritmo base64 que descrifraremos para sacar la contraseña

<div align="left">

<figure><img src="../../../.gitbook/assets/image (96).png" alt="" width="563"><figcaption></figcaption></figure>

</div>

Nos conectamos con usuario Jon con ssh&#x20;

<div align="left">

<figure><img src="../../../.gitbook/assets/image (97).png" alt="" width="563"><figcaption></figcaption></figure>

</div>
